# Gunakan Node.js base image
FROM node:18-bullseye-slim

# Install Chromium dependencies
RUN apt-get update && apt-get install -y \
  chromium \
  chromium-sandbox \
  fonts-ipafont-gothic fonts-wqy-zenhei fonts-thai-tlwg fonts-kacst \
  --no-install-recommends \
  && rm -rf /var/lib/apt/lists/*

# Set env supaya whatsapp-web.js tahu lokasi Chromium
ENV PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium

# Buat direktori kerja
WORKDIR /app

# Copy package.json dan install dependencies
COPY package.json ./
RUN npm install --omit=dev

# Copy semua file project
COPY . .

# Expose port (Railway otomatis handle)
EXPOSE 3000

# Jalankan bot
CMD ["npm", "start"]
